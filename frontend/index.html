<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>EEG Alzheimer Detection</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg:#0b1020; --card:#141a2a; --muted:#7f8db2; --text:#e7ecff; --accent:#4f8cff;
      --success:#1ec28b; --error:#ff5c7a; --border:#22304a;
    }
    * { box-sizing: border-box; }
    body {
      margin:0; padding:2rem;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      color:var(--text); background:radial-gradient(1200px 600px at 20% -10%, #1a2240 0%, #0b1020 60%);
      min-height:100vh; display:flex; align-items:center; justify-content:center;
    }
    .container { width:min(900px, 95vw); }
    h1 { margin:0 0 1rem; font-weight:700; letter-spacing:.3px; }
    p.sub { color:var(--muted); margin:.25rem 0 1.25rem; }
    .card {
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
      border:1px solid var(--border); border-radius:16px; padding:1.25rem 1.25rem 1rem; box-shadow:0 10px 30px rgba(0,0,0,.25);
    }
    .api { display:flex; gap:.5rem; align-items:center; margin-bottom:1rem; }
    .api input {
      flex:1; padding:.6rem .8rem; font:inherit; color:var(--text);
      background:#0f1526; border:1px solid var(--border); border-radius:10px;
    }
    .btn {
      appearance:none; border:1px solid #3557a2; background:linear-gradient(180deg, #4f8cff, #3d6fde);
      color:#fff; padding:.65rem 1rem; border-radius:10px; font-weight:600; cursor:pointer;
      transition:transform .04s ease, filter .2s ease; box-shadow:0 8px 18px rgba(79,140,255,.25);
    }
    .btn:disabled { opacity:.5; cursor:not-allowed; }
    .btn:active { transform:translateY(1px); }
    .btn.secondary { background:#0f1526; border:1px solid var(--border); color:var(--text); box-shadow:none; }
    .muted { color:var(--muted); font-size:.9rem; }
    .drop {
      flex:1; border:2px dashed #2a3a66; border-radius:14px; padding:1rem; text-align:center;
      background:#0f1526; color:var(--muted);
    }
    .drop.drag { border-color:var(--accent); color:#bcd3ff; }
    .drop input { display:none; }
    .small { font-size:.85rem; }
    .result-box {
      margin-top:1rem; padding:.8rem 1rem; border:1px solid #1b3a2e; background:#0f1d19; border-radius:12px;
    }
    .grid { display:grid; grid-template-columns:140px 1fr; gap:8px; align-items:center;}
    .pill {
      display:inline-block; padding:.25rem .55rem; font-size:.9rem; font-weight:600; border-radius:999px;
      background:rgba(30,194,139,.1); color:var(--success); border:1px solid rgba(30,194,139,.25);
    }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
    details { margin-top:1rem; border:1px solid var(--border); border-radius:12px; overflow:hidden; background:#0f1526; }
    details > summary { list-style:none; padding: .9rem 1rem; cursor:pointer; user-select:none; color:#c7d4ff; }
    pre { margin:0; padding:1rem; white-space:pre-wrap; color:#d9e2ff; max-height:40vh; overflow:auto; }
    .error { margin-top:.8rem; color:#ffd3db; background:#33151e; border:1px solid #5c2436; padding:.6rem .8rem; border-radius:10px; }
    .spinner {
      width:18px; height:18px; border:3px solid #7792c9; border-top-color:transparent; border-radius:50%;
      display:inline-block; animation:spin .8s linear infinite; vertical-align:-4px;
    }
    @keyframes spin { to { transform:rotate(360deg); } }
  </style>
</head>
<body>
  <div class="container">
    <h1>EEG Alzheimer Detection</h1>
    <p class="sub">Upload an EEGLAB `.set` file to S3 and get a prediction from a TensorFlow model on AWS Lambda.
    <br><strong>Note:</strong> This is a demo. As the TensorFlow model is large, the first prediction (a "cold start") may take several minutes to load.</p>

    <div class="card">
      <div class="api">
        <span class="muted small">API URL</span>
        
        <!-- Put in your own Cloud/AWS api ui -->
        <input id="apiUrl" value="https://.execute-api.ap-south-1.amazonaws.com/default" />
                                  
                                  



        <button class="btn secondary" id="pingBtn">Check</button>
      </div>

      <div style="display:flex; gap:1rem; flex-wrap:wrap; align-items:center;">
        <label class="drop" id="dropArea">
          <strong>Drag & drop</strong> your `.set` file here<br/>
          <span class="small">or</span><br/>
          <input type="file" id="fileInput" accept=".set" />
          <button class="btn secondary" id="pickBtn" type="button" style="margin-top:.6rem;">Choose file</button>
          <div id="fileName" class="muted small" style="margin-top:.4rem;">No file selected</div>
        </label>
        <div style="display:flex; flex-direction:column; gap:.6rem; min-width:180px;">
          <button class="btn" id="submitBtn">Upload & Predict</button>
          <button class="btn secondary" id="sampleBtn">Run Demo</button>
          <div class="muted small">Uploads go directly to S3 via a presigned URL.</div>
        </div>
      </div>

      <div id="status" class="muted small" style="margin-top:.8rem;"></div>
      <div id="errBox" class="error" style="display:none;"></div>

      <div class="result-box" id="resultBox" style="display:none;">
        <div class="grid">
          <div class="muted">Predicted Class</div>
          <div id="predClass" class="pill mono"></div>
          <div class="muted">Confidence</div>
          <div id="predConf" class="mono"></div>
          <div class="muted">All Probabilities</div>
          <div id="predProbs" class="mono small"></div>
        </div>
      </div>

      <details id="respWrap" style="margin-top:1rem;">
        <summary>Raw API response</summary>
        <pre id="output">{}</pre>
      </details>
    </div>
  </div>

  <script src="app.js"></script>
</body>

</html>
